---
id: FC38102E56000B12
title: 169、多数元素
date: 2022-04-22 15:40:35
permalink: /leetcode/majority-element
link: https://leetcode-cn.com/problems/majority-element
toc: false
categories:
  - LeetCode
tags:
  - 数组
  - 哈希表
  - 分治
  - 计数
  - 排序
---

<Level type='easy'/>

## 题目

给定一个大小为 `n` 的数组，找到其中的多数元素。多数元素是指在数组中出现次数 **大于** `⌊ n/2 ⌋` 的元素。

你可以假设数组是非空的，并且给定的数组总是存在多数元素。

## 示例

示例 1：

```text
输入：[3,2,3]
输出：3
```

示例 2：

```text
输入：[2,2,1,1,1,2,2]
输出：2
```

**进阶**：

尝试设计时间复杂度为 `O(n)`、空间复杂度为 `O(1)` 的算法解决此问题。

## 分析

- 统计筛选
  - 遍历数组元素，计算当前元素的总个数是否大于 n/2，是则返回，不是则将所有数据过滤继续遍历。
- 哈希统计
  - 遍历数组元素，使用哈希表记录元素个数，直到找到个数大于 n/2 的数。
- 排序
  - 由于元素个数大于 n/2，排序后 n/2 的值必定为多数元素值。
- 摩尔投票法
  - 对拼消耗，例如玩一个诸侯争霸的游戏，假设你方人口超过总人口一半以上，并且能保证每个人口出去干仗都能一对一同归于尽。最后还有人活下来的国家就是胜利。
- 随机
  - 随机抽取一个元素，统计他的值是否大于 n/2，若是则返回，否则继续抽取。

## 解答

:::: code-group
::: code-group-item 统计筛选

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var majorityElement = function (nums) {
  while (nums.length) {
    const count = nums.filter((num) => num === nums[0]).length
    if (count > Math.floor(nums.length / 2)) {
      return nums[0]
    } else {
      nums = nums.filter((num) => num !== nums[0])
    }
  }
}
```

:::
::: code-group-item 哈希统计

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var majorityElement = function (nums) {
  const map = new Map()
  const max = Math.floor(nums.length / 2)
  for (const num of nums) {
    const count = map.get(num) || 0
    if (count + 1 > max) {
      return num
    } else {
      map.set(num, count + 1)
    }
  }
}
```

:::
::: code-group-item 排序

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var majorityElement = function (nums) {
  return nums.sort((a, b) => a - b)[Math.floor(nums.length / 2)]
}
```

:::
::: code-group-item 摩尔投票法

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var majorityElement = function (nums) {
  let candidate = nums[0]
  let count = 1
  for (const num of nums) {
    if (num === candidate) {
      count++
    } else {
      count--
    }
    if (count === 0) {
      candidate = num
      count = 1
    }
  }
  return candidate
}
```

:::
::: code-group-item 随机

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var majorityElement = function (nums) {
  const max = Math.floor(nums.length / 2)
  while (true) {
    const candidate = nums[Math.round(Math.random() * nums.length)]
    const count = nums.filter((num) => num === candidate).length
    if (count > max) {
      return candidate
    }
  }
}
```

:::
::::
