---
id: B252E3A68EAEFB5E
title: 258、各位相加
date: 2022-03-03 20:45:48
permalink: /leetcode/add-digits
link: https://leetcode-cn.com/problems/add-digits
toc: false
categories:
  - LeetCode
tags:
  - 数学
  - 数论
  - 模拟
---

<Level type='easy'/>

## 题目

给定一个非负整数 `num`，反复将各个位上的数字相加，直到结果为一位数。返回这个结果。

## 示例

示例 1:

```text
输入: num = 38
输出: 2
解释: 各位相加的过程为：
38 --> 3 + 8 --> 11
11 --> 1 + 1 --> 2
由于 2 是一位数，所以返回 2。
```

示例 2:

```text
输入: num = 0
输出: 0
```

## 提示

- 0 <= num <= 2<sup>31</sup> - 1

**进阶**：你可以不使用循环或者递归，在 `O(1)` 时间复杂度内解决这个问题吗？

## 分析

- 模拟  
  循环递归计算，直到得到了各位数后返回。

- 数学  
  同余原理，对于任意一个正整数而言，我们最终是要求得 <code>a<sub>0</sub> + a<sub>1</sub> + a<sub>2</sub> + ... + a<sub>n-1</sub></code> 对 `99` 取模的数。 而利用「同余式相加」性质，等价于每个数分别对 `9` 取模之和，再集合任意的 <code>10<sup>n</sup></code> 对 `99` 取模恒为 `1`，可得最终答案为原数对 `9` 取模，剩下只需要对相加结果为 `9` 的边界情况进行处理即可。

## 解答

:::: code-group
::: code-group-item 模拟

```javascript
/**
 * @param {number} num
 * @return {number}
 */
var addDigits = function (num) {
  let ans = num
    .toString()
    .split('')
    .reduce((sum, n) => sum + +n, 0)
  while (ans > 9) {
    ans = addDigits(ans)
  }
  return ans
}
```

:::
::: code-group-item 数学

```javascript
/**
 * @param {number} num
 * @return {number}
 */
var addDigits = function (num) {
  return ((num - 1) % 9) + 1
}
```

:::
::::
