---
id: 4198AFE7BBCBB809
title: 238、除自身以外数组的乘积
date: 2021-12-02 19:10:48
permalink: /leetcode/product-of-array-except-self
link: https://leetcode-cn.com/problems/product-of-array-except-self
toc: false
categories:
  - LeetCode
tags:
  - 数组
  - 前缀和
---

<Level type="medium"/>

## 题目

给你一个整数数组  `nums`，返回 数组  `answer` ，其中  `answer[i]`  等于  `nums`  中除  `nums[i]`  之外其余各元素的乘积  。

题目数据 **保证** 数组  `nums` 之中任意元素的全部前缀元素和后缀的乘积都在 **32 位** 整数范围内。

请**不要使用除法**，且在 `O(n)` 时间复杂度内完成此题。

## 示例

示例 1:

```text
输入: nums = [1,2,3,4]
输出: [24,12,8,6]
```

示例 2:

```text
输入: nums = [-1,1,0,-3,3]
输出: [0,0,9,0,0]
```

## 提示

- 2 <= nums.length <= 105
- -30 <= nums[i] <= 30
- 保证 数组  nums 之中任意元素的全部前缀元素和后缀的乘积都在  32 位 整数范围内

**进阶**：你可以在常数空间复杂度内完成这个题目吗？（ 出于对空间复杂度分析的目的，输出数组**不被视为**额外空间。）

## 分析

同时计算从左到右和从右到左的前缀乘积，除自身以外数组的乘积就等于 `left[i-1] \* right[i+1]`，为了方便处理边界值可以在 `left` 的左边和 `right` 的右边补充一个 `1`

## 解答

```javascript
/**
 * @param {number[]} nums
 * @return {number[]}
 */
var productExceptSelf = function (nums) {
  const n = nums.length
  const right = new Array(n + 1).fill(1)
  const left = new Array(n + 1).fill(1)
  const ans = new Array(n)
  for (let i = 0; i < n; i++) {
    left[i + 1] = left[i] * nums[i]
    right[n - i - 1] = right[n - i] * nums[n - 1 - i]
  }
  for (let i = 0; i < n; i++) {
    ans[i] = left[i] * right[i + 1]
  }
  return ans
}
```
