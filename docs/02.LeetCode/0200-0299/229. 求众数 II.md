---
id: CB15FDDCC45B21B0
title: 229、求众数 II
date: 2022-01-09 21:58:01
permalink: /leetcode/majority-element-ii
link: https://leetcode-cn.com/problems/majority-element-ii
toc: false
categories:
  - LeetCode
tags:
  - 数组
  - 哈希表
  - 计数
  - 排序
---

<Level type="medium"/>

## 题目

给定一个大小为`n`的整数数组，找出其中所有出现超过`⌊ n/3 ⌋`次的元素。

## 示例

示例 1：

```text
输入：[3,2,3]
输出：[3]
```

示例 2：

```text
输入：nums = [1]
输出：[1]
```

示例 3：

```text
输入：[1,1,1,3,3,2,2,2]
输出：[1,2]
```

## 提示

- 1 <= nums.length <= 5 \* 10<sup>4</sup>
- -10<sup>9</sup> <= nums[i] <= 10<sup>9</sup>

**进阶**：尝试设计时间复杂度为 `O(n)`、空间复杂度为 `O(1)`的算法解决此问题。

## 分析

摩尔投票法可以找到数量大于 `1/2` 的数，核心思想是对拼消耗，题目需要找出数量大于 `1/3` 的数，最多是有两个数符合要求，那么，选择 `3` 个互不相同的数进行对拼消耗，得到数量最多的两个数，再判断是否数量大于 `1/3`。

还可以使用哈希统计，直接统计数组中数量大于 `1/3` 的数。

## 解答

```javascript
/**
 * @param {number[]} nums
 * @return {number[]}
 */
var majorityElement = function (nums) {
  let candidate1 = 0
  let candidate2 = 0
  let count1 = 0
  let count2 = 0
  for (const num of nums) {
    if ((count1 === 0 || num === candidate1) && num !== candidate2) {
      candidate1 = num
      count1++
    } else if (count2 === 0 || num === candidate2) {
      candidate2 = num
      count2++
    } else {
      count1--
      count2--
    }
  }
  count1 = 0
  count2 = 0
  for (const num of nums) {
    if (num === candidate1) {
      count1++
    } else if (num === candidate2) {
      count2++
    }
  }
  const max = Math.floor(nums.length / 3)
  const ans = []
  if (count1 > max) {
    ans.push(candidate1)
  }
  if (count2 > max) {
    ans.push(candidate2)
  }
  return ans
}
```
