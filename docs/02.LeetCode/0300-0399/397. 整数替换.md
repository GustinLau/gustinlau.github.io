---
id: 9A5EAFC5C9BF58F9
title: 397、整数替换
date: 2021-12-02 19:10:48
permalink: /leetcode/integer-replacement
link: https://leetcode-cn.com/problems/integer-replacement
toc: false
categories:
  - LeetCode
tags:
  - 贪心
  - 位运算
  - 记忆化搜索
  - 动态规划
---

<Level type='medium'/>

给定一个正整数 `n` ，你可以做如下操作：

1. 如果 `n` 是偶数，则用 `n / 2` 替换 `n` 。
2. 如果 `n` 是奇数，则可以用 `n + 1` 或 n - 1 替换 `n` 。

`n` 变为 `1` 所需的最小替换次数是多少？

## 示例

示例 1：

```text
输入：n = 8
输出：3
解释：8 -> 4 -> 2 -> 1
```

示例 2：

```text
输入：n = 7
输出：4
解释：7 -> 8 -> 4 -> 2 -> 1
或 7 -> 6 -> 3 -> 2 -> 1
```

示例 3：

```text
输入：n = 4
输出：2
```

## 提示

- 1 <= n <= 2<sup>31</sup> - 1

## 分析

如果是基数则查询 `n+1` 和 `n-1`,偶数查询 `n/2`，往下记忆搜素

## 解答

```javascript
/**
 * @param {number} n
 * @return {number}
 */
var integerReplacement = function (n) {
  const cache = new Map()
  const ms = (num, step) => {
    if (num === 1) {
      return step
    }
    if (cache.get(num) != null) {
      return cache.get(num) + step
    } else {
      let result
      if (num % 2 === 0) {
        result = ms(num / 2, step + 1)
      } else {
        result = Math.min(ms(num + 1, step + 1), ms(num - 1, step + 1))
      }
      cache.set(num, result - step)
      return result
    }
  }
  return ms(n, 0)
}
```
