---
id: FCBB193BAE8A2721
title: 390、消除游戏
date: 2022-01-02 09:44:40
permalink: /leetcode/elimination-game
link: https://leetcode-cn.com/problems/elimination-game
toc: false
categories:
  - LeetCode
tags:
  - 数学
---

<Level type='medium'/>

## 题目

列表 `arr` 由在范围 `[1, n]` 中的所有整数组成，并按严格递增排序。请你对 `arr` 应用下述算法：

- 从左到右，删除第一个数字，然后每隔一个数字删除一个，直到到达列表末尾。
- 重复上面的步骤，但这次是从右到左。也就是，删除最右侧的数字，然后剩下的数字每隔一个删除一个。
- 不断重复这两步，从左到右和从右到左交替进行，直到只剩下一个数字。

给你整数 `n` ，返回 `arr` 最后剩下的数字。

## 示例

示例 1：

```text
输入：n = 9
输出：6
解释：
arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
arr = [2, 4, 6, 8]
arr = [2, 6]
arr = [6]
```

示例 2：

```text
输入：n = 1
输出：1
```

## 提示

- 1 <= n <= 10<sup>9</sup>

## 分析

每次删除前和删除后都是一个等差数列，删除后的公差是删除前公差的两倍，数列个数倍减，从左到右删除，删除后首项=删除前首项+公差，删除后末项可通过公式计算得出，同理，从右到左删除，删除后末项=删除前末项-公差，首项可通过公式计算得出。最终循环得到剩下的一项即为答案。

## 解答

```javascript
/**
 * @param {number} n
 * @return {number}
 */
var lastRemaining = function (n) {
  // 首项、末项、公差
  let s = 1,
    e = n,
    c = 1
  let reverse = false
  while (n > 1) {
    if (!reverse) {
      // 首项 = 前首项 + 公差
      s = s + c
      //　项数减倍
      n >>= 1
      //　公差加倍
      c <<= 1
      // 首项 + (n-1) * 公差
      e = s + (n - 1) * c
    } else {
      // 末项 = 前末项 - 公差
      e = e - c
      //　项数减倍
      n >>= 1
      //　公差加倍
      c <<= 1
      // 首项 = 末项 - (n-1) * 公差
      s = e - (n - 1) * c
    }
    // 翻转
    reverse = !reverse
  }
  return s
}
```
